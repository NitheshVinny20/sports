<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Registration - Female</title>
    <style>
        :root {
            --primary-pink: #db2777;
            --deep-purple: #4c1d95;
            --grass-light: #fdf2f8;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(rgba(76, 29, 149, 0.7), rgba(76, 29, 149, 0.7)), 
                        url('https://images.unsplash.com/photo-1531415074968-036ba1b575da?auto=format&fit=crop&q=80&w=2000');
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            padding: 15px;
        }

        /* Page Transition */
        .card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            width: 100%;
            max-width: 1000px;
            border-radius: 20px;
            padding: clamp(20px, 5vw, 40px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transition: transform 0.5s ease-in, opacity 0.5s;
        }

        .slide-out { transform: translateX(100%); opacity: 0; }

        /* Gender Toggle Navigation */
        .gender-nav { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 15px; 
            margin-bottom: 30px; 
            border-bottom: 1px solid #fce7f3; 
            padding-bottom: 15px; 
        }
        .switch { position: relative; width: 60px; height: 30px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { 
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; 
            background-color: var(--deep-purple); transition: .4s; border-radius: 34px; 
        }
        .slider:before { 
            position: absolute; content: ""; height: 22px; width: 22px; 
            left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; 
        }
        input:checked + .slider { background-color: var(--primary-pink); }
        input:checked + .slider:before { transform: translateX(30px); }
        .nav-label { font-weight: bold; color: #9d174d; font-size: 0.9rem; }

        /* Typography & Sections */
        h1 { color: var(--primary-pink); font-weight: 900; text-transform: uppercase; margin-bottom: 5px; }
        .section-title { 
            color: var(--white); background: var(--deep-purple); padding: 6px 16px; 
            border-radius: 50px; display: inline-block; font-size: 0.75rem; font-weight: bold; 
            margin: 25px 0 15px 0; 
        }
        .sub-header { background: var(--primary-pink); }

        /* Grid System */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        .roster-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }

        .player-box { 
            background: var(--grass-light); border: 1px solid #fbcfe8; padding: 12px; border-radius: 14px; 
            display: flex; align-items: center; gap: 12px; transition: 0.3s; 
        }
        .player-box:hover { border-color: var(--primary-pink); background: white; transform: translateY(-2px); }

        .jersey-num { 
            background: #fdf2f8; width: 32px; height: 32px; min-width: 32px; 
            display: flex; align-items: center; justify-content: center; border-radius: 50%; 
            font-weight: bold; color: var(--primary-pink); border: 1px solid #f9a8d4;
        }

        /* Inputs */
        .floating { position: relative; width: 100%; margin-top: 10px; }
        .floating input { 
            width: 100%; padding: 12px; border: 2px solid #fbcfe8; 
            border-radius: 10px; outline: none; background: transparent; 
        }
        .floating label { 
            position: absolute; left: 12px; top: 50%; transform: translateY(-50%); 
            color: #be185d; pointer-events: none; transition: 0.2s ease; 
        }
        .floating input:focus + label, .floating input:not(:placeholder-shown) + label { 
            top: -8px; font-size: 11px; background: white; padding: 0 5px; color: var(--primary-pink); 
        }

        input {
            width: 100%; padding: 10px; margin: 3px 0; border: 1px solid #fbcfe8;
            border-radius: 6px; outline-color: var(--primary-pink);
        }

        .btn { 
            background: var(--primary-pink); color: white; width: 100%; padding: 18px; 
            border-radius: 12px; border: none; font-size: 1.1rem; font-weight: bold; 
            cursor: pointer; margin-top: 30px; transition: 0.3s; text-transform: uppercase;
        }
        .btn:hover { background: var(--deep-purple); transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="container">
    <div class="card" id="main-card">
        <div class="header">
            <div class="gender-nav">
                <span class="nav-label">Male</span>
                <label class="switch">
                    <input type="checkbox" id="gender-toggle" checked onchange="toggleGender()">
                    <span class="slider round"></span>
                </label>
                <span class="nav-label">Female</span>
            </div>
            
            <h1>Cricket Registration</h1>
            <p>Female Squad of 15 â€¢ 11 Starters + 4 Bench</p>
        </div>

        <form id="teamForm" action="https://docs.google.com/forms/d/e/YOUR_FEMALE_FORM_ID/formResponse" method="POST" target="hidden_iframe">
            
            <div class="section-title">Team Leadership</div>
            <div class="grid">
                <div class="field floating">
                    <input type="text" name="entry.1997065996" class="save-local" placeholder=" " required>
                    <label>Team Name</label>
                </div>
                <div class="field floating">
                    <input type="text" name="entry.2081326091" class="save-local" placeholder=" " required>
                    <label>Captain Name</label>
                </div>
                <div class="field floating">
                    <input type="text" name="entry.1127107364" class="save-local" placeholder=" " required>
                    <label>Captain AUID</label>
                </div>
                <div class="field floating">
                    <input type="tel" name="entry.2029844490" class="save-local" placeholder=" " required pattern="[0-9]{10}">
                    <label>Mobile Number</label>
                </div>
            </div>

            <div class="section-title">Starting XI (Players 2-11)</div>
            <div class="roster-grid" id="starters-container"></div>

            <div class="section-title sub-header">Reserves (Substitute 1-4)</div>
            <div class="roster-grid" id="subs-container"></div>

            <button type="submit" class="btn" id="submitBtn">Finalize Female Squad</button>
        </form>

        <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    </div>
</div>

<script>
/* ------------------------------
   Restore + Auto Save
------------------------------ */

function restoreInputs() {
    const inputs = document.querySelectorAll('.save-local, .floating input');
    inputs.forEach(input => {
        const val = localStorage.getItem('cricketSquad_' + input.name);
        if (val) input.value = val;
    });
}

function enableAutoSave() {
    const inputs = document.querySelectorAll('.save-local, .floating input');
    inputs.forEach(input => {
        input.addEventListener('input', () => {
            localStorage.setItem('cricketSquad_' + input.name, input.value);
        });
    });
}

window.addEventListener("DOMContentLoaded", () => {
    restoreInputs();
    enableAutoSave();
});


/* ------------------------------
   ðŸ”¥ Mobile Back Button Fix
------------------------------ */

window.addEventListener("pageshow", function (event) {

    const isBFCache =
        event.persisted ||
        performance.getEntriesByType("navigation")[0]?.type === "back_forward";

    if (isBFCache) {

        // Reset slide animation
        const card = document.querySelector(".card");
        if (card) card.classList.remove("slide-out");

        // Reset gender toggle state
        const toggle = document.getElementById("gender-toggle");
        if (toggle) toggle.checked = true; // Female page = ON

        // Reset submit button state
        const btn = document.getElementById("submitBtn");
        if (btn) {
            btn.disabled = false;
            btn.innerHTML = "Register Team";
        }
    }
});


/* ------------------------------
   Gender Toggle Navigation
------------------------------ */

function toggleGender() {
    const toggle = document.getElementById('gender-toggle');
    const card = document.querySelector('.card');

    if (!toggle || !card) return;

    card.classList.add('slide-out');

    setTimeout(() => {
        window.location.href = toggle.checked
            ? 'female.html'
            : 'cricket_reg.html';
    }, 400);
}


/* ------------------------------
   Submission Handling
------------------------------ */

const form = document.getElementById('teamForm');

if (form) {
    form.addEventListener('submit', function () {

        const btn = document.getElementById('submitBtn');
        if (btn) {
            btn.innerHTML = "Sending to Pavilion...";
            btn.disabled = true;
        }

        setTimeout(() => {
            localStorage.clear();
            alert("Squad Registered! All the best!");
            location.reload();
        }, 1500);
    });
}

</script>
</body>
</html>