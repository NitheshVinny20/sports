<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Registration - Female</title>

    <style>
        :root {
            --primary-pink: #db2777;
            --deep-purple: #4c1d95;
            --grass-light: #fdf2f8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            min-height: 100vh;
            background: linear-gradient(rgba(76, 29, 149, .7), rgba(76, 29, 149, .7)),
            url('https://images.unsplash.com/photo-1531415074968-036ba1b575da?auto=format&fit=crop&q=80&w=2000');
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            padding: 15px;
        }

        .card {
            background: rgba(255, 255, 255, .98);
            width: 100%;
            max-width: 1000px;
            border-radius: 20px;
            padding: clamp(20px, 5vw, 40px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, .4);
            transition: .5s;
        }

        .slide-out { transform: translateX(100%); opacity: 0; }

        .gender-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .switch { position: relative; width: 60px; height: 30px; }
        .switch input { opacity: 0; width: 0; height: 0; }

        .slider {
            position: absolute; inset: 0;
            background: var(--deep-purple);
            border-radius: 34px;
            transition: .4s;
            cursor: pointer;
        }
        .slider:before {
            content: "";
            position: absolute;
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background: white;
            border-radius: 50%;
            transition: .4s;
        }
        input:checked + .slider { background: var(--primary-pink); }
        input:checked + .slider:before { transform: translateX(30px); }

        .nav-label { font-weight: bold; color: #9d174d; }

        .section-title {
            margin: 25px 0 15px;
            padding: 6px 16px;
            border-radius: 50px;
            background: var(--deep-purple);
            color: white;
            font-size: .75rem;
            font-weight: bold;
            display: inline-block;
        }
        .sub-header { background: var(--primary-pink); }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        .roster-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }

        .player-box {
            background: var(--grass-light);
            border: 1px solid #fbcfe8;
            padding: 12px;
            border-radius: 14px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .jersey-num {
            background: #fdf2f8;
            width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            color: var(--primary-pink);
        }

        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #fbcfe8;
            border-radius: 6px;
            outline-color: var(--primary-pink);
            margin: 3px 0;
        }

        .btn {
            margin-top: 30px;
            padding: 16px;
            width: 100%;
            background: var(--primary-pink);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: .3s;
        }
        .btn:hover { background: var(--deep-purple); }
    </style>
</head>
<body>

<div class="card">
    <div class="gender-nav">
        <span class="nav-label">Male</span>
        <label class="switch">
            <input type="checkbox" id="gender-toggle">
            <span class="slider"></span>
        </label>
        <span class="nav-label">Female</span>
    </div>

    <h2 style="text-align:center;color:#db2777;margin-bottom:20px;">
        Cricket Team Registration
    </h2>

    <form id="teamForm"
          action="https://docs.google.com/forms/d/e/1FAIpQLSexfmqNIAVqUlLWiNOQndDd9MbH1pyjg_Pzh0gkiQH9cF0gfQ/formResponse"
          method="POST" target="hidden_iframe">

        <div class="section-title">Team Leadership</div>

        <div class="grid">
            <input type="text" name="entry.1997065996" placeholder="Team Name" required>
            <input type="text" name="entry.2081326091" placeholder="Captain Name" required>
            <input type="text" name="entry.1127107364" placeholder="Captain AUID" required>
            <input type="tel" name="entry.2029844490" placeholder="Mobile Number" required pattern="[0-9]{10}">
        </div>

        <div class="section-title">Starting XI (Players 2-11)</div>
        <div class="roster-grid" id="starters-container"></div>

        <div class="section-title sub-header">Reserves (Substitute 1-2)</div>
        <div class="roster-grid" id="subs-container"></div>

        <button type="submit" class="btn" id="submitBtn">
            Finalize Squad
        </button>
    </form>

    <iframe name="hidden_iframe" style="display:none;"></iframe>
</div>

<script>
    /* -------- PLAYER FIELD MAPS -------- */
    const startersMap = [
        { n: "entry.164796864", i: "entry.466232286" },
        { n: "entry.279343295", i: "entry.590979872" },
        { n: "entry.1906076037", i: "entry.96241058" },
        { n: "entry.908985867", i: "entry.1159611705" },
        { n: "entry.1988112041", i: "entry.1539910648" },
        { n: "entry.1685335114", i: "entry.1156136104" },
        { n: "entry.2103729441", i: "entry.1761177781" },
        { n: "entry.911277598", i: "entry.1938205651" },
        { n: "entry.1635033387", i: "entry.1366413584" },
        { n: "entry.1971252509", i: "entry.2125999837" }
    ];

    /* UPDATED: Subs Map expanded to 4 substitutes as per link */
    const subsMap = [
        { n: "entry.357225766", i: "entry.1982817856" },
        { n: "entry.1284111609", i: "entry.1497776436" },
    ];

    /* -------- AUTO GENERATE PLAYERS -------- */
    function generatePlayers() {
        const starters = document.getElementById("starters-container");
        startersMap.forEach((p, i) => {
            starters.innerHTML += `
            <div class="player-box">
                <div class="jersey-num">${i + 2}</div>
                <div style="flex:1">
                    <input type="text" name="${p.n}" placeholder="Player Name">
                    <input type="text" name="${p.i}" placeholder="AUID">
                </div>
            </div>`;
        });

        const subs = document.getElementById("subs-container");
        subsMap.forEach((p, i) => {
            subs.innerHTML += `
            <div class="player-box">
                <div class="jersey-num">R${i + 1}</div>
                <div style="flex:1">
                    <input type="text" name="${p.n}" placeholder="Reserve Name">
                    <input type="text" name="${p.i}" placeholder="AUID">
                </div>
            </div>`;
        });
    }

    /* -------- INITIAL LOAD -------- */
    document.addEventListener("DOMContentLoaded", () => {
        generatePlayers();
        document.getElementById("gender-toggle").checked = true;
    });

    /* -------- TOGGLE NAVIGATION -------- */
    document.getElementById("gender-toggle")
        .addEventListener("change", function () {
            document.querySelector(".card").classList.add("slide-out");
            setTimeout(() => {
                if (this.checked) {
                    window.location.href = "female.html";
                } else {
                    window.location.href = "cricket_reg.html";
                }
            }, 400);
        });

    /* -------- MOBILE BACK FIX -------- */
    window.addEventListener("pageshow", function (event) {
        const isBFCache = event.persisted || performance.getEntriesByType("navigation")[0]?.type === "back_forward";
        if (isBFCache) {
            document.querySelector(".card").classList.remove("slide-out");
            document.getElementById("gender-toggle").checked = true;
            const btn = document.getElementById("submitBtn");
            btn.disabled = false;
            btn.innerHTML = "Finalize Squad";
        }
    });

    /* -------- SUBMIT HANDLER -------- */
    document.getElementById("teamForm")
        .addEventListener("submit", function () {
            const btn = document.getElementById("submitBtn");
            btn.disabled = true;
            btn.innerHTML = "Submitting...";
            setTimeout(() => {
                alert("Squad Registered!");
                location.reload();
            }, 1500);
        });
</script>

</body>
</html>